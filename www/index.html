<!DOCTYPE html> 
<html>
<head>
<meta charset="utf-8">
<!-- create this dynamicaly-->

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<title>45 Graphics App</title>
<link href="style.css" rel="stylesheet" type="text/css" />

<link href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" rel="stylesheet" type="text/css"/>
<link href="http://mobile.45graphics.net/jquery-mobile/jquery.mobile.structure-1.0.min.css" rel="stylesheet" type="text/css"/>
<script src="http://code.jquery.com/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js" type="text/javascript"></script>

<!--
<link href="/jquery-mobile/jquery.mobile.theme-1.0.min.css" rel="stylesheet" type="text/css"/>
<link href="/jquery-mobile/jquery.mobile.structure-1.0.min.css" rel="stylesheet" type="text/css"/>
<script src="/jquery-mobile/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="/jquery-mobile/jquery.mobile-1.0.min.js" type="text/javascript"></script>
-->

</head>
<body>

<div data-role="page" id="page">

<div class="sec">
  <div class="logo"><img src="assets/app-logo.jpg"></div>
  
  	<div id="slogan">
  	<h1>Welcome to 45 Graphics</h1>
    <div id="notifyDesignReady"></div>
    </div>
</div>
          
<div id="sec">
 <div class="free" id="free">
    <h1>Free 3d Text</h1>
    <p>Get your FREE 3d text, just fill in the info and once 3d text is done we will email it to you. Please provide a valid email :)</p>
    <img name="" src="assets/3d-Text.jpg" width="100%" height="197" alt="">
    <input type="hidden" name="maxFile" id="maxFile" value="small1.max">
    <label>3d text:</label>
    <input name="3dtext" id="edtext" placeholder="3d text word, name?" type="text">
    <label>Set font color:</label>
    <input name="fontColor" id="fontColor" type="color" value="#336699">
    <label>Set background color:</label>
    <input name="backgroundColor" id="backgroundColor" type="color" value="#ffffff">
    <label>Email adress: <spam id="emailNotice"></spam></label>
    <input name="email" id="email" placeholder="email" type="email">
    <button name="send" onClick="d.sendDatafree()">Request free 3d text</button>
</div>
</div>
    
      
      <div class="sec">
          <div id="slogan">
          
            <p>If you have an idea or would just like to get a price on a 3d logo design job, please fell free to contact us.</p>
          
            <a id="emailB" href="mailto:logos@45graphics.net">logos@45graphics.net</a>
            <a id="emailB" href="tel:(619) 316-9904">Call today!</a>
            <a id="emailB" href="sms:(619) 316-9904">Text us your idea!</a>
          </div>
      </div>

	<div class="sec">
     
      <div data-role="content">
          <ul data-role="listview" data-inset="true" id="list">
          	<li data-role="list-divider">3D DESIGN SERVICES</li> 
          </ul>
          <div id="slogan">		
         <a id="emailB" href="https://play.google.com/store/apps/details?id=com.graphics.logodesign">Review my work..</a>  
      		</div>
      
      </div>
   
<div class="sec">
<div id="slogan">
	<h1>We now offer t-shirts with your logos for $25</h1>
     <p>We can print the logo you provide or the 3d design we create on the shirt.</p>
     <p>Light color shirts $18, Dark shirts $25</p>
     <p>Get your gamer name on a shirt included when you buy a shirt a $10 dollar value.</p>
     <img src="assets/shirt_master.jpg" width="300">
     <img src="assets/shirt-cardinal.jpg" width="300">
     <img src="assets/3-design.jpg" width="300">
</div>
</div>
      
   </div>
      
      <div data-role="footer">
          <h4>45graphics.net Mobile</h4>
      </div>
  </div>
  
  
<div data-role="page" id="orderPage" data-add-back-btn="true">
  <div data-role="header">
    <h1>Header</h1>
  </div>
  <div data-role="content">
    <div data-role="fieldcontain">
      
      <label for="textinput2">Text Input:</label>
      <input type="text" name="textinput2" id="textinput2" value=""  />
    </div>
  
  </div>
  <div data-role="footer">
    <h4>Footer</h4>
  </div>
</div>
  
  
  

<div data-role="page" id="page2" data-add-back-btn="true">
<div id="status">0 | 0</div>
	<div data-role="header">
		<h1 id="titlebaby">Page Two</h1>
	</div>
	<div data-role="content">	
    
		<div id="b">here is a test</div>
	</div>
	<div data-role="footer">
		<h4 id="footer"></h4>
	</div>
</div>

<div data-role="page" id="page3">
	<div data-role="header">
		<h1>Order Form</h1>
	</div>
	<div data-role="content">	
		
	</div>
	<div data-role="footer">
		<h4>Order Form</h4>
	</div>
</div>

<div data-role="page" id="page4">
	<div data-role="header">
		<h1>Page Four</h1>
	</div>
	<div data-role="content">	
		Content		
	</div>
	<div data-role="footer">
		<h4>Page Footer</h4>
	</div>
</div>

<div data-role="page" id="freeText">
  <div data-role="header">
    <h1>$10 basic 3D text</h1>
  </div>
  <div data-role="content">
  	<div id="bb">
    	<p>Starting at $10 dollars per 3D text.</p>
        <p>Here are samples of a basic 3D text. If you need your own 3D text, send us the following information.</p>
        <p><h2>Text to do in 3d, colors to use and Font type, find a font type at www.dafont.com</h2></p>
      <p><img name="" src="http://45graphics.net/assets/web_sites/_small3d-logo-ez.jpg" alt="free 3d sample"></p>
        <p><img name="" src="http://45graphics.net/assets/web_sites/_small3d-text-codmaniac.jpg" alt="free 3d sample"></p>
    </div>
  </div>
  <div data-role="footer">
    <h4>$10 basic 3D text</h4>
  </div>
</div>

</body>

 <script type="text/javascript" language="javascript">
    	var formdata = new FormData();
		var allok = 0;
		var d = {
				
				clearForm: function(){
					
					var c = d.sel("free");
					for(var i=0; i < c.length; i++){
					
						if(c[i].id == "email"){
							c[i].value = "";
							}
						if(c[i].id == "edtext"){
							c[i].value = "";
							}
						d.byID("emailNotice").innerHTML = ""; 
					
					}
					
					},
				
				byID: function(x){
					return document.getElementById(x);
					},
					
				ValidateEmail: function(mail){  
					var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;  
					if(mail.match(mailformat)) { 
						return (true)  
					  } 
						allok++;
						d.byID("email").style.color = "red";
						d.byID("emailNotice").innerHTML = "Only valid email address!"; 
						alert("You have entered an invalid email address!")  
						return (false)  
					},  
			
				mediaSize: function(){
					
					var x, y;
						x = window.innerWidth;
						y = window.innerHeight;
						console.log(x + " - " + y);
					
					},
				sel:function(area){
					
					var a =  document.getElementById(area);
					return a.getElementsByTagName("input");
					
					},
					
				getData: function(){
					allok = 0;
					var data = d.sel("free");
					
						formdata.append("module", "3dapp");
						formdata.append("appName", "3dlogodesign");
						
						formdata.append("id", localStorage.getItem('registrationId'));
						for(var i=0; i < data.length; i++){
							if(data[i].id != ""){
							if(data[i].value != ""){
							if(data[i].id == "email"){
								d.ValidateEmail(data[i].value);
								}
							console.log(data[i].id + "--------------------");
							console.log(data[i].value + "--------------------");
							formdata.append(data[i].id, data[i].value)
							}else{ allok++; }
							}
						}
						
						
					
					},
				sendDatafree: function(){
					
					
				
					d.getData();
					if(allok == 0){
					console.log("submit was clicked");
					//alert(formdata);
					var x = "";
					x = new XMLHttpRequest();
					d.clearForm();
					x.open("POST", "https://45graphics.net/api/logodesignappdata.php", true);
					//x.setRequestHeader("Content-type", "application/x-www-formAsh-urlencoded");
					x.onreadystatechange = function(){
						if(x.readyState == 4 && x.status == 200){
							var r = JSON.parse(x.responseText);
							if(r.status == 1){
								
								alert(r.result);
							}
						}
					}
					
					x.send(formdata);
					
					}else{
					alert("all fields must be used!");	
						}
				}
			
			}

      </script>

<script>

function getTheSize(){
	
	var w = window.innerWidth;
	var h = window.innerHeight;
	console.log(w + " -- " + h);
	
	}
getTheSize();
function changeColor(){
			
		//document.getElementById(theId).value = "";
		var theId = event.target.id;
		//this.value;
		var x = "";
		 x = document.getElementById(theId);
		var y = "";
		 y = document.getElementById(theId).value;
		//alert(y);
		x.style.background =  y;
		document.getElementById("email").focus();
		}
function clearColor(){
	var theId = event.target.id;
	document.getElementById(theId).value = "";
	};

$(document).ready( function(){
	
	var numberOfImage = 0;
		
	function yHandler(){
		
		//window.scrollTo(0, 1);
	var yOffset = window.pageYOffset;
	var newy = yOffset + window.innerHeight;
	var b = document.getElementById("b");
		
		
		var contentHeight = b.offsetHeight;
		//alert(contentHeight);
		//this.newy = yOffset + window.innerHeight;
		var showResult = document.getElementById("status");
		showResult.innerHTML = contentHeight+ " | " + newy;		
		lookAtImagesPosition();
		
		}
function lookAtImagesPosition(){
		var d = document.getElementById("b");
		var	img = d.getElementsByTagName("img");
			var yOffset = window.pageYOffset;
	var newy = yOffset + window.innerHeight;
	var posImage = "";
			for(var i=0; i<img.length; i++){
				posImage = img[i].offsetTop;
				//console.log(posImage)
				if(img[i].src == "http://www.45graphics.net/45GraphicsApp/assets/default.gif"){
					if(posImage+25 <= newy){
					img[i].src = img[i].title;
					img[i].setAttribute("width", "100%");
					}
				}	
			}
	}
	
	
var appdata = "";
	//api to pull data
	$.getJSON("http://45graphics.net/api/index.php?appDataApi=true", function(info){
	//$.getJSON("http://45graphics.net/api/index.php?table=web_sites", function(info){
		//$("#list").empty();
		
		appdata = info;
		for(var i=0; i<info.length; i++){
				//console.log(info[i]);
				
				console.log(info[i].type + " " + info[i].price);
				var li = document.createElement("li");
				var a  = document.createElement("a");
				li.appendChild(a);
				a.innerHTML = info[i].type + " " + info[i].price;
				a.setAttribute("id", info[i].id);
				a.setAttribute("rel", i);
				a.setAttribute("title", info[i].type);
				a.setAttribute("href", "#page2");
				$("#list").append(li);
				$("#list").listview('refresh');
								//var data = "";
				//this.data = info;
				a.onclick = doSomething;			
	}

		});
		
function doSomething(){
	appdata[this.rel][i] = "";
	$("#b, #footer").empty();
	var d= JSON.stringify(appdata[this.rel]);
	$("#titlebaby, #footer").text($(this).text()); // set the title and footer for page2
	//fixxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
	//createPaymentLink();
	for(var i=0; i < d.length; i++){
		//console.log(appdata[this.rel][i].imagefilename);
		placeImage(appdata[this.rel][i].imagefilename, appdata[this.rel][i].name, appdata[this.rel][i].notes);				
	}					
}
			
function createPaymentLink(){
	var page = document.getElementById("b");
	var b = document.createElement("div");		
		b.setAttribute("class", "orderToday");
		b.addEventListener("click", orderPage);
		page.appendChild(b);
			switch(event.target.id){
				case "3dtext":
					this.job = "ORDER A 3D TEXT";
					break;
				case "gm":
					this.job = "ORDER A GAMING LOGO";
					break;
				case "custom3d":
					this.job = "ORDER A CUSTOM 3D LOGO";
					break	
			}
	var t = document.createTextNode(job);
	b.appendChild(t);
	//alert(t.nodeValue);
}
			
		function orderPage(){
			//alert("ok");
			document.location.href = "#orderPage";
			}
		
		function placeImage(image, name, notes){
			
			 
			 
			
				
				var text = document.createTextNode("3d logo for: "+name);
				var p = document.createElement("p");
				var p2 = document.createElement("p");
				var hr = document.createElement("hr");
				var br = document.createElement("br");
				p2.innerHTML = notes;
				//alert()
				
				var latestJob = document.getElementById("b");
				var	img = document.createElement("img");
				
				if(numberOfImage <= 3){
				numberOfImage++;
				console.log(numberOfImage);
				img.setAttribute("src", "http://www.45graphics.net/assets/web_sites/_small"+image);
				img.setAttribute("title", "http://www.45graphics.net/45GraphicsApp/assets/default.gif");
				}else{
						img.setAttribute("title", "http://www.45graphics.net/assets/web_sites/_small"+image);
						img.setAttribute("src", "http://www.45graphics.net/45GraphicsApp/assets/default.gif");
				}
					img.setAttribute("class", "latestJob");
					p.appendChild(text);
					
					latestJob.appendChild(img)
					latestJob.appendChild(p); ;
					latestJob.appendChild(p2);
					latestJob.appendChild(hr);
					latestJob.appendChild(br);
					
				}
		/*
		function createButton(buttonText, myClass, type){
		//<button data-icon="gear" data-iconpos="bottom">Button</button>
		var p = "";
		var a = "";
			p = document.createElement("p");
			a = document.createElement("a");
			p.setAttribute("id", this.id);
			p.onclick = function(){
					var result = confirm("Are you sure you want to "+ type + "?");
						if(type == "delete"){
						if(result == true){
							
							$.getJSON("http://45graphics.com/api/index.php?delete=yes&id="+this.id, function(info){
								alert(info.status);
								$("li #"+info.id).css("background", "#F60").text("Item Deleted").css("color", "white").click(false);
								console.log(info.id);
								history.back();
							});
							
							}else{
								alert("No action will Happen!");
								}
						}
						
						
				}
			p.setAttribute("class", myClass);
			a.innerHTML = buttonText;
			a.setAttribute("id", type);
			p.appendChild(a);
			$("#b").append(p);
			
		}
		*/
		
		
		window.onscroll = yHandler;
		
	
	})
var app = {
	
    // Application Constructor
    initialize: function() {
        this.bindEvents();
    },
    // Bind Event Listeners
    //
    // Bind any events that are required on startup. Common events are:
    // 'load', 'deviceready', 'offline', and 'online'.
    bindEvents: function() {
        document.addEventListener('deviceready', this.onDeviceReady, false);
    },
    // deviceready Event Handler
    //
    // The scope of 'this' is the event. In order to call the 'receivedEvent'
    // function, we must explicitly call 'app.receivedEvent(...);'
    onDeviceReady: function() {
        console.log('Received Device Ready Event');
        console.log('calling setup push');
        //for testing purposes remove
		app.setupPush();
    },
	
    setupPush: function() {
        console.log('calling push init');
        var push = PushNotification.init({
            "android": {
                //"senderID": "eElVSOVofa8"
				 "senderID": 291568499285
				//eElVSOVofa8
            },
            "browser": {},
            "ios": {
                "sound": true,
                "vibration": true,
                "badge": true
            },
            "windows": {}
        });
        console.log('after init');

        push.on('registration', function(data) {
            console.log('registration event: ' + data.registrationId);
			//localStorage.setItem('registrationId', data.registrationId);
//alert(data.registrationId);
            var oldRegId = localStorage.getItem('registrationId');
			//localStorage.setItem('registrationId', data.registrationId);
			
			// alert(data.registrationId);
            
			var appName = "test-3dlogodesign";
 			var appCategory = "pushNotifications";
			var d = new Date();
			var appRegistration = d.getFullYear()+"-"+ d.getMonth() +"-"+ d.getDate();
 			//var appUserName = prompt("your name", "");
			
				
			//if(oldRegId) {
			if(oldRegId !== data.registrationId) { //working one
                // Save new registration ID
                localStorage.setItem('registrationId', data.registrationId);
               
			   
				// Post registrationId to your app server as the value has changed
				
				x = new XMLHttpRequest();
				//alert(device.model+ " " +device.uuid +" "+device.platform)
				var sendData  = "?regid="+data.registrationId;
					sendData += "&appName="+escape(appName);
					sendData += "&appCategory="+escape(appCategory);
					sendData += "&appRegistration="+escape(appRegistration);
					sendData += "&deviceModel="+escape(device.model);
					sendData += "&uuid="+escape(device.uuid);
					sendData += "&devicePlatform="+escape(device.platform);
					
					
				x.open("GET", "https://45graphics.net/curlTest/test.php"+sendData, true);
				x.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				x.onreadystatechange = function(){
					
						if(x.readyState == 4 && x.status == 200){
							//alert(x.responseText);
						}
				}
		
			x.send();
				}

            var parentElement = document.getElementById('registration');
            var listeningElement = parentElement.querySelector('.waiting');
            var receivedElement = parentElement.querySelector('.received');

            listeningElement.setAttribute('style', 'display:none;');
            receivedElement.setAttribute('style', 'display:block;');
        });

        push.on('error', function(e) {
            console.log("push error = " + e.message);
        });
		
		function hello(x){
			alert(x);
			}

        push.on('notification', function(data) {
            //console.log('notification event' + "---------------------------------");
			//var ul = document.getElementById("targetbaby");
			//var li = document.createElement("li");
				//li.innerHTML =  data.title+" "+data.message;
				//ul.appendChild(li); 
            navigator.notification.alert(
                data.message,          // message
                null,                 // callback
               data.title,           // title
				'Ok'                // buttonName
            );
			
       });
    }
};
app.initialize();
//d.mediaSize();
</script>
	
 <script type="text/javascript" src="cordova.js"></script>
 </html>